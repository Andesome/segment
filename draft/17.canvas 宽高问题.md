# 正则表达式
## <a name="situation"></a> 场景
在最近的工作中碰到了合成图片的需求，首先想到的便是 canvas，到网上查找了一些资料，大部分也是使用 canvas。因为好久没有实际接触过这方面的东西了，感觉到一些兴奋。预估会收获不少。

## 宽高问题
### 有单位的属性值
因为是在手机上，需要进行不同尺寸的适配，在已有项目中使用的是 rem 单位，想着既然拥有全局属性 width 和 height，那么理论上应该支持。后来经过尝试，发现这个想法不对。这是[示例][]，移动二维码访问。


后来看看[规范][url-spec-canvas]中的描述，发现描述的已经很清楚了：
> The canvas element has two attributes to control the size of the element's bitmap: width and height. These attributes, when specified, must have values that are [valid non-negative integers][url-valid-non-negative-integers]. The [rules for parsing non-negative integers][url-parse-rule] must be used to obtain their numeric values. If an attribute is missing, or if parsing its value returns an error, then the default value must be used instead. The width attribute defaults to 300, and the height attribute defaults to 150.

> canvas 元素有2个控制元素位图的属性：width 和 height。这些属性，当指定的时候，必须要是[非负整数值][url-valid-non-negative-integers]。一定要使用解析非负整数的[规则][url-parse-rule]，来获取它们的数字值。如果一个属性值没有，或者解析的时候返回了一个错误，那么一定要使用默认的值。width 属性的默认值是 300，height 属性的默认值是 150。

仔细看看然后结合实践就会发现：带单位不会有作用。

### css 属性值
除了直接设置元素属性，还是可以通过 css 来控制 canvas 的宽高，实践后发现是可以的。









## 参考资料
[npm help docs][url-npm-docs]


[url-spec-canvas]:https://html.spec.whatwg.org/multipage/canvas.html#the-canvas-element
[url-valid-non-negative-integers]:https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#valid-non-negative-integer
[url-parse-rule]:https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#rules-for-parsing-non-negative-integers
[url-npm-blog]:https://medium.com/coinmonks/everything-you-wanted-to-know-about-package-lock-json-b81911aa8ab8
[url-npm-blog-translate]:https://codertx.github.io/2018/01/09/about-package-json/
[url-npm-china-doc]:https://www.kancloud.cn/shellway/npm-doc/199981